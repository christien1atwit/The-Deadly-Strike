:Character:
## This is a skeleton, which is added to all characters automatically. You can use it to define the common parts of your character, for example:
## - System mechanics
## - Movement
## - Attack types
## etc.
:Specs-UI:
def UI_Widgets_HPBar int() = 0
def UI_Widgets_HPBar___Asset1 str() = 
def UI_Widgets_HPBar___Asset2 str() = 
def UI_Widgets_HPBar___Asset3 str() = 
def UI_Widgets_HPBar___DefaultColor int() = 1
def UI_Widgets_HPBar___Direction int() = 0
def UI_Widgets_HPBar___HookPoint str() = HP
def UI_Widgets_HPBar___ScenePath str() = res://UI/HealthBar.tscn
def UI_Widgets_HPBar___Type int() = 0
def UI_Widgets_HPBar___UseWidget bool() = 1
def UI_Widgets_HPBar___Variable1 str() = HP
def UI_Widgets_HPBar___Variable2 str() = 
def UI_Widgets_HPBar___Variable3 str() = HPMax
def UI_Widgets_Meter int() = 0
def UI_Widgets_Meter___Asset1 str() = 
def UI_Widgets_Meter___Asset2 str() = 
def UI_Widgets_Meter___Asset3 str() = 
def UI_Widgets_Meter___DefaultColor int() = 3
def UI_Widgets_Meter___Direction int() = 0
def UI_Widgets_Meter___HookPoint str() = Meter
def UI_Widgets_Meter___ScenePath str() = res://UI/MeterBar.tscn
def UI_Widgets_Meter___Type int() = 0
def UI_Widgets_Meter___UseWidget bool() = 1
def UI_Widgets_Meter___Variable1 str() = Meter
def UI_Widgets_Meter___Variable2 str() = 
def UI_Widgets_Meter___Variable3 str() = MeterMax
:Specs-PhysicsTeching:
def ATTACK_Hitstun_CanRecoverInAir bool() = 0
def ATTACK_Tech_Airborne_CanTechBackward bool() = 0
def ATTACK_Tech_Airborne_CanTechDown bool() = 0
def ATTACK_Tech_Airborne_CanTechForward bool() = 0
def ATTACK_Tech_Airborne_CanTechUp bool() = 0
def ATTACK_Tech_Grounded_CanTechBackward bool() = 0
def ATTACK_Tech_Grounded_CanTechForward bool() = 0
def ATTACK_Tech_Grounded_CanTechUp bool() = 0
def ATTACK_Tech_Grounded_Neutral_MomentumY int() = 0
def ATTACK_Tech_Knockdown_Backward_RecoverCrouching bool() = 0
def ATTACK_Tech_Knockdown_CanTechBackward bool() = 0
def ATTACK_Tech_Knockdown_CanTechForward bool() = 0
def ATTACK_Tech_Knockdown_CanTechUp bool() = 0
def ATTACK_Tech_Knockdown_Forward_RecoverCrouching bool() = 0
def ATTACK_Tech_Knockdown_Neutral_RecoverCrouching bool() = 0
:Specs-PhysicsSystem:
def PHYSICS_StandardHurtbox_Bottom int() = 0
def PHYSICS_StandardColbox_Bottom int() = 0
def PHYSICS_StandardColbox_Width int() = 4000
def PHYSICS_StandardHurtbox_Use bool() = 1
def PHYSICS_StandardColbox_Use bool() = 1
:Specs-PhysicsMovement:
def MOVE_AirActionsMax int() = 1
def MOVE_Backdash_Speed int() = -1900
def MOVE_CrouchToStand_Time int() = 3
def MOVE_Dashes_CanBackdash bool() = 1
def MOVE_Dashes_CanHighjump bool() = 1
def MOVE_Dashes_CanRun bool() = 1
def MOVE_Highjump_HighjumpB_InitialMomentumX int() = -1500
def MOVE_Highjump_HighjumpB_InitialMomentumY int() = 4500
def MOVE_Highjump_HighjumpF_InitialMomentumX int() = 1500
def MOVE_Highjump_HighjumpF_InitialMomentumY int() = 4500
def MOVE_Highjump_HighjumpN_InitialMomentumY int() = 4500
def MOVE_Jump_JumpB_InitialMomentumX int() = -1500
def MOVE_Jump_JumpB_InitialMomentumY int() = 3500
def MOVE_Jump_JumpF_InitialMomentumX int() = 1500
def MOVE_Jump_JumpF_InitialMomentumY int() = 3500
def MOVE_Jump_JumpN_InitialMomentumY int() = 3500
def MOVE_Jump_JumpsquatTime int() = 1
def MOVE_Landing_RecoverCrouching bool() = 0
def MOVE_Landing_TimeAttack int() = 4
def MOVE_Landing_TimeEmpty int() = 2
def MOVE_Run_Speed int() = 2100
def MOVE_Run_SpeedStart int() = 2100
def MOVE_Run_StartTime int() = 5
def MOVE_StandToCrouch_Time int() = 3
def MOVE_TurnaroundStand_Time int() = 0
def MOVE_Walk_SpeedB int() = -1000
def MOVE_Walk_SpeedF int() = 1500
:Specs-MenuData:
# Automatic creation
:Specs-Graphics:
def GRAPHICS_SPRITESHEET_BlockSpark int() = 0
def GRAPHICS_SPRITESHEET_BlockSpark___OriginX int() = 21
def GRAPHICS_SPRITESHEET_BlockSpark___OriginY int() = 21
def GRAPHICS_SPRITESHEET_BlockSpark___PaletteMode int() = 0
def GRAPHICS_SPRITESHEET_BlockSpark___Path str() = res://Assets/Effects/BlockSpark-Sheet.png
def GRAPHICS_SPRITESHEET_BlockSpark___PixelSize int() = 100
def GRAPHICS_SPRITESHEET_BlockSpark___SpritesX int() = 4
def GRAPHICS_SPRITESHEET_BlockSpark___SpritesY int() = 1
def GRAPHICS_SPRITESHEET_GrabSpark int() = 0
def GRAPHICS_SPRITESHEET_GrabSpark___OriginX int() = 21
def GRAPHICS_SPRITESHEET_GrabSpark___OriginY int() = 21
def GRAPHICS_SPRITESHEET_GrabSpark___PaletteMode int() = 0
def GRAPHICS_SPRITESHEET_GrabSpark___Path str() = res://Assets/Effects/CommandSpark-Sheet.png
def GRAPHICS_SPRITESHEET_GrabSpark___PixelSize int() = 100
def GRAPHICS_SPRITESHEET_GrabSpark___SpritesX int() = 6
def GRAPHICS_SPRITESHEET_GrabSpark___SpritesY int() = 1
def GRAPHICS_SPRITESHEET_HitSpark int() = 0
def GRAPHICS_SPRITESHEET_HitSpark___OriginX int() = 21
def GRAPHICS_SPRITESHEET_HitSpark___OriginY int() = 21
def GRAPHICS_SPRITESHEET_HitSpark___PaletteMode int() = 0
def GRAPHICS_SPRITESHEET_HitSpark___Path str() = res://Assets/Effects/HitEffect-Sheet.png
def GRAPHICS_SPRITESHEET_HitSpark___PixelSize int() = 1000
def GRAPHICS_SPRITESHEET_HitSpark___SpritesX int() = 3
def GRAPHICS_SPRITESHEET_HitSpark___SpritesY int() = 1
def GRAPHICS_Scale int() = 4000
:Specs-AudioSFX:
def AUDIO_SFX_Block int() = 0
def AUDIO_SFX_Block___Filepath str() = res://Assets/SFX/AttackBlock.wav
def AUDIO_SFX_Block___Volume int() = 1000
def AUDIO_SFX_Heavy_Hit int() = 0
def AUDIO_SFX_Heavy_Hit___Filepath str() = res://Assets/SFX/Heavy-Hit.wav
def AUDIO_SFX_Heavy_Hit___Volume int() = 1000
def AUDIO_SFX_Light_Hit int() = 0
def AUDIO_SFX_Light_Hit___Filepath str() = res://Assets/SFX/Light-Hit.wav
def AUDIO_SFX_Light_Hit___Volume int() = 1000
:Specs-AttacksTypes:
def ATTACK_EX_CanCancelIntoSuper bool() = 0
def ATTACK_Heavy_CanCancelIntoHeavies bool() = 0
def ATTACK_Heavy_CanCancelIntoMediums bool() = 0
def ATTACK_Heavy_CanCancelIntoSpecials bool() = 0
def ATTACK_Heavy_CanJumpCancelOnHit bool() = 0
def ATTACK_Light_CanCancelIntoHeavies bool() = 0
def ATTACK_Light_CanCancelIntoLights bool() = 0
def ATTACK_Light_CanCancelIntoMediums bool() = 1
def ATTACK_Light_CanCancelIntoSpecials bool() = 0
def ATTACK_Light_CanJumpCancelOnHit bool() = 0
def ATTACK_Light_ProrationHitstun int() = 950
def ATTACK_Light_ProrationHitstunStarter int() = 820
def ATTACK_Medium_CanCancelIntoHeavies bool() = 0
def ATTACK_Medium_CanCancelIntoMediums bool() = 0
def ATTACK_Medium_CanCancelIntoSpecials bool() = 1
def ATTACK_Medium_CanJumpCancelOnHit bool() = 0
def ATTACK_Special_CanCancelIntoEX bool() = 0
def ATTACK_Special_CanCancelIntoSuper bool() = 1
def ATTACK_Super_MeterCost int() = 99
:Specs-AttacksThrows:
def ATTACK_Throw_Air_ThrowBAutoFlip bool() = 0
def ATTACK_Throw_CanAirThrow bool() = 0
def ATTACK_Throw_Ground_TimeHold int() = 15
def ATTACK_Throw_Tech_ActiveTime int() = 5
def ATTACK_Throw_Tech_LockoutTime int() = 10
:Specs-AttacksMechanics:
def ATTACK_CanBlockInAir bool() = 0
:Specs-Anims:
def ANIMS_UseStandardAnims bool() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___10_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___10_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___10_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___1_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___1_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___1_Spritesheet str() = BlockSpark
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___2_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___2_Frame int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___2_Spritesheet str() = BlockSpark
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___3_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___3_Frame int() = 2
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___3_Spritesheet str() = BlockSpark
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___4_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___4_Frame int() = 3
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___4_Spritesheet str() = BlockSpark
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___5_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___5_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___5_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___6_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___6_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___6_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___7_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___7_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___7_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___8_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___8_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___8_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___9_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___9_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Block-Spark___9_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___10_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___10_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___10_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___1_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___1_Frame int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___1_Spritesheet str() = GrabSpark
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___2_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___2_Frame int() = 2
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___2_Spritesheet str() = GrabSpark
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___3_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___3_Frame int() = 3
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___3_Spritesheet str() = GrabSpark
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___4_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___4_Frame int() = 4
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___4_Spritesheet str() = GrabSpark
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___5_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___5_Frame int() = 5
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___5_Spritesheet str() = GrabSpark
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___6_Duration int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___6_Frame int() = 6
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___6_Spritesheet str() = GrabSpark
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___7_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___7_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___7_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___8_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___8_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___8_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___9_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___9_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Grab-Spark___9_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___10_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___10_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___10_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___1_Duration int() = 2
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___1_Frame int() = 1
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___1_Spritesheet str() = HitSpark
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___2_Duration int() = 2
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___2_Frame int() = 2
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___2_Spritesheet str() = HitSpark
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___3_Duration int() = 2
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___3_Frame int() = 3
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___3_Spritesheet str() = HitSpark
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___4_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___4_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___4_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___5_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___5_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___5_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___6_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___6_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___6_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___7_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___7_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___7_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___8_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___8_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___8_Spritesheet str() = 
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___9_Duration int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___9_Frame int() = 0
def GRAPHICS_SPRITE_ANIMATIONS_Norm-Spark___9_Spritesheet str() =
:Variables-System:
var current_lane int() = 1
var op_lane int() = 1

var my_id int() = 0
var opponent_id int() = 1

var frame_count int() = 0

var juggle_count int() = 0
var op_juggle_count int() = 0

def DEF_SCALE int() = 4000
def BAK_SCALE int() = 3500
def FRN_SCALE int() = 4500
def SCALING_AMOUNT int() = 500

def DEF_ORIGIN_X int() = 75
def DEF_ORIGIN_Y int() = 0
def ORIGIN_AMOUNT=20
var current_scale int() = 4000
:Variables:
## These variables are common to all characters since it's in the skeleton.
##var current_lane int() = 1
:AnimBlockstunCrouching:
CallParent()

Anim(Guard_Lo)
:AnimBlockstunStanding:
CallParent()

Anim(Guard_Hi, 0)
:AnimCrouching:
CallParent()
Anim(Crouch)
:AnimHighjumpB:
CallParent()
Anim(Jump)
:AnimHighjumpF:
CallParent()
Anim(Jump)
:AnimHighjumpN:
CallParent()
Anim(Jump)
:AnimHitstun:
CallParent()
## Helper state to select which hitstun animation to play
_Category(Animations/Reacts/Hitstun)
_Helper()
_Overridable(If you want custom logic for how hitstun's animation works)




LPF_Airborne:
	Call(AnimHitstunAirborne)
else
	LCrouching:
		Call(AnimHitstunCrouching)
	else
		Call(AnimHitstunStanding)
	endif
endif
:AnimHitstunCrouching:
CallParent()

Anim(Hitstun_Crouching)
:AnimHitstunStanding:
CallParent()
PFreeze:
		
		AnimFrame(Hitstun_Standing, 0)
		
	endif
:AnimJumpB:
CallParent()
Anim(Jump)
:AnimJumpF:
CallParent()
Anim(Jump)
:AnimJumpN:
CallParent()
Anim(Jump)
:AnimKnockdown:
CallParent()

Anim(Knockdown)
:AnimRun:
CallParent()

Anim(Run)
AnimLoop(16)
:AnimStandToCrouch:
CallParent()
Anim(Crouch)
:Bring-To-Floor:
Vcurrent_lane=0:
	SetWorldPositionY(5000)
endif

Vcurrent_lane=1:
	SetWorldPositionY(1)
endif

Vcurrent_lane=2:
	SetWorldPositionY(-5000)
endif
:Common:
CallParent()

# Frame Count Logic #

Add(frame_count, 1)
Vframe_count>256:
	Set(frame_count, 0)
endif

##

# Crash Logic #

VMeter<0:	
	
	Vframe_count>245:
		Sub(HP,25)
		VHP<0:
			Set(HP,0)
		endif
		
	endif

endif

##

Call(Raise-Lane-Flag)

LPF_Airborne:
	Flag(Airborne)
endif

LPF_Landing:
	Call(OnLanding)
endif



### Juggle Logic ###

	Vjuggle_count>2:
		#FlagNext(Invul-All)
		#Log(Should be unjuggle)
		HurtboxAvoids(Juggle)
	endif

######

Call(DashInputHelper)
:Correct-Scale:
Vcurrent_lane==0:
	Set(current_scale, BAK_SCALE)
endif

Vcurrent_lane==1:
	Set(current_scale, DEF_SCALE)
endif

Vcurrent_lane==2:
	Set(current_scale, FRN_SCALE)
endif
:Custom-NeutralStateCommon:
CallParent()
Call(Raise-Lane-Flag)
SpriteOrder(current_lane)
GetCurrentEntityID(my_id)
Vmy_id==0:
	Set(opponent_id, 1)
else
	Set(opponent_id, 0)
endif

TargetEntityByID(opponent_id)
CopyFromTarget(op_lane,current_lane)
Vcurrent_lane==op_lane:
	SetColboxPhantom(0)
else
	SetColboxPhantom(1)
endif
:Custom-OnAttackBlocked:
CallParent()
AddMomentum(-1650)

Add(Meter,1)

#####Hitspark Management#####
VFXSprite(Block-Spark)
VFXTime(6)
VFXScale(4000)
VFXCreate()
:Custom-OnAttackHit:
CallParent()
Log(_Flags)
AddMomentum(-1200)

#####Meter Management#####
LMeterLHit:
	Add(Meter, 5)
endif

LMeterHHit:
	Add(Meter, 10)
endif

Call(Unique-Move-Meter-Gain)

VMeter>MeterMax:
	Set(Meter,MeterMax)
endif

#####Hitspark Management#####
LSpecialSpark:
	Call(Hit-Spark-Manager)
else
	VFXSprite(Norm-Spark)
	VFXTime(6)
endif
VFXScale(4000)
VFXCreate()
:Custom-OnBlock:
CallParent()
#Log(_Flags)
Move(-100)

SFXPlay(Block)

LAF_Heavy:
	Add(Meter, 3)
endif

LAF_Light:
	Add(Meter, 1)
endif

VMeter>MeterMax:
	Set(Meter,MeterMax)
endif
:Custom-OnHit:
CallParent()

### Dragging Logic ###
LAF_DragIn:
	Log("Drag In")
	Sub(current_lane, 1)
	Vcurrent_lane<0:
		Set(current_lane, 0)
	endif
	SetColboxLayer(current_lane)
	SpriteOrder(current_lane)
	Call(Raise-Lane-Flag)
endif

LAF_DragOut:
	Log("Drag Out")
	Add(current_lane, 1)
	Vcurrent_lane>2:
		Set(current_lane, 2)
	endif
	SetColboxLayer(current_lane)
	SpriteOrder(current_lane)
	Call(Raise-Lane-Flag)
endif
#######


### Sound Logic ###
LAF_Light:
	SFXPlay(Light_Hit)
endif

LAF_Heavy:
	SFXPlay(Heavy_Hit)
endif
######

### Juggle Logic ###
LAF_Juggle:
	Add(juggle_count, 1)
endif
######
:Custom-OnReturnToNeutral:
CallParent()
BreakMomentumX(1000)
Call(Correct-Scale)

### Reset Juggle ###

	Vjuggle_count>2:
		Log(Resetting Juggle)
		Unflag(Invul-All)
	endif

Set(juggle_count, 0)

######
:FDash-Atk:
# Simple medium attack template
_Overridable()
AttackRegister(Medium)

# Adjust parameters here
AttackDamage(1000)
AttackDuration(60)
# AttackFlag(Low)

# Put your animation here
#Anim(5B)

# Active frames and hitboxes
F10-12:
	Hitbox(0, 15000, 5000, 15000)
endif
:Hit-Spark-Manager:
_Overridable()

LGrab-Move:
	VFXSprite(Grab-Spark)
	VFXTime(6)
endif
:Raise-Lane-Flag:
##Will set the appropriate lane flag when called




Vcurrent_lane==0:
	Flag(BackLane)
	ModelScale(BAK_SCALE)
	#Set(current_scale, BAK_SCALE)
endif

Vcurrent_lane==1:
	Flag(MidLane)
	ModelScale(DEF_SCALE)
	#Set(current_scale, DEF_SCALE)
endif

Vcurrent_lane==2:
	Flag(FrontLane)
	ModelScale(FRN_SCALE)
	#Set(current_scale, FRN_SCALE)
endif


#LogB(_Flags)
:Run:
CallParent()


Unflag(FaceTarget)

AttackAddRegisteredCancels(Light)
AttackCancel(Shift-In-FDash, 6A+B)
AttackCancel(Shift-Out-FDash, 6C+D)
:Shift-Hop-In:
_Overridable()
AttackRegister(Light, 236C+D)


Call(Raise-Lane-Flag)
AttackDuration(25)

Anim(Jump)

F1-20:
	Flag(Invul-Low)
	Flag(Invul-Grab)
endif

F2:
	AddMomentum(0,2500)
endif

Vcurrent_lane>0:
	SetColboxPhantom(1)
	

	Sub(current_scale, 25)
	ModelScale(current_scale)

	
	
	
	F15:
		Sub(current_lane, 1)
		SetColboxLayer(current_lane)
		Call(Raise-Lane-Flag)
	endif
	
	F25:
		Transition(AnimStand)
	endif
	
endif
:Shift-Hop-Out:
_Overridable()
AttackRegister(Light, 236A+B)


Call(Raise-Lane-Flag)
AttackDuration(25)

Anim(Jump)

F1-20:
	Flag(Invul-Low)
	Flag(Invul-Grab)
endif

F2:
	AddMomentum(0,2500)
endif

Vcurrent_lane<2:
	SetColboxPhantom(1)
	

	Add(current_scale, 25)
	ModelScale(current_scale)

	
	
	
	F15:
		Add(current_lane, 1)
		SetColboxLayer(current_lane)
		Call(Raise-Lane-Flag)
	endif
	
	F25:
		Transition(AnimStand)
	endif
	
endif
:Shift-In-BDash:
AttackRegister(Light, 4C+D)
_Overridable()
Call(Raise-Lane-Flag)
AttackDuration(20)



Vcurrent_lane>0:
	SetColboxPhantom(1)
	

	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Sub(current_scale, 25)
	ModelScale(current_scale)
	
	
	F1:
		SetMomentum(-3000, 0)
	endif

	F3+:
		AttackCancel(Shift-Out-FDash, 6C+D)
	endif	
	
	
	F15:
		Sub(current_lane, 1)
		SetColboxLayer(current_lane)
		#Log(current_lane)
		Call(Raise-Lane-Flag)
	endif
	
	F20:
		Transition(AnimStand)
	endif
	
endif
:Shift-In-FDash:
AttackRegister(Light, 6C+D)
Call(Raise-Lane-Flag)
AttackDuration(20)
_Overridable()
Anim(Run)

Unflag(PF_Airborne)
Flag(PF_Grounded)

Vcurrent_lane>0:
	SetColboxPhantom(1)

	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Sub(current_scale, 25)
	ModelScale(current_scale)
	
	
	F1:
		SetMomentum(3000, 0)
	endif

	
	
	F15:
		Sub(current_lane, 1)
		SetColboxLayer(current_lane)
		#Log(current_lane)
		Call(Raise-Lane-Flag)
		IC:
			Log(HELLO)
			Unflag(PF_Airborne)
			Flag(PF_Grounded)
			TransitionBuffer(FDash-Atk)
		endif	
	endif
	
	
	

	
	
	
	F20:
		Transition(AnimStand)
	endif
	
endif
:Shift-In-Stand:
_Overridable()
AttackRegister(Light, 5C+D)
Call(Raise-Lane-Flag)
AttackDuration(20)



Vcurrent_lane>0:
	SetColboxPhantom(1)
	

	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Sub(current_scale, 25)
	ModelScale(current_scale)

	
	
	
	F15:
		Sub(current_lane, 1)
		SetColboxLayer(current_lane)
		Call(Raise-Lane-Flag)
	endif
	
	F20:
		Transition(AnimStand)
	endif
	
endif
:Shift-Out-BDash:
_Overridable()
AttackRegister(Light, 4A+B)
Call(Raise-Lane-Flag)
AttackDuration(20)



Vcurrent_lane<2:
	SetColboxPhantom(1)
	
	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Add(current_scale, 25)
	ModelScale(current_scale)
	
	
	
	F1:
		SetMomentum(-3000, 0)
	endif

	
	F16+:
		AttackCancel(Shift-In-FDash, 6A+B)
	endif	
	
	F15:
		Add(current_lane, 1)
		SetColboxLayer(current_lane)
		#Log(current_lane)
		Call(Raise-Lane-Flag)
		Call(Bring-To-Floor)
	endif
	
	F20:
		Transition(AnimStand)
	endif
	
endif
:Shift-Out-FDash:
_Overridable()
AttackRegister(Light, 6A+B)
Call(Raise-Lane-Flag)
AttackDuration(20)

Anim(Run)

Vcurrent_lane<2:
	SetColboxPhantom(1)
	
	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Add(current_scale, 25)
	ModelScale(current_scale)
	
	
	
	F1:
		SetMomentum(3000,0)
	endif

	

	F15:
		Add(current_lane, 1)
		SetColboxLayer(current_lane)
		#Log(current_lane)
		Call(Raise-Lane-Flag)
		Call(Bring-To-Floor)
		IC:
			Log(HELLO)
			Unflag(PF_Airborne)
			Flag(PF_Grounded)
			TransitionBuffer(FDash-Atk)
		endif	
	endif

	

	
	F20:
		Transition(AnimStand)
	endif
	
endif
:Shift-Out-Stand:
_Overridable()
AttackRegister(Light, 5A+B)
Call(Raise-Lane-Flag)
AttackDuration(20)

Anim(Stand)
AnimLoop(8)
Vcurrent_lane<2:
	SetColboxPhantom(1)
	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Add(current_scale, 25)
	ModelScale(current_scale)
	
	
	
	F14:
		Add(current_lane, 1)
		SetColboxLayer(current_lane)
		SpriteOrder(current_lane)
		#Log(current_lane)
		Call(Raise-Lane-Flag)
		Call(Bring-To-Floor)
	endif
	
	F20:
		Transition(AnimStand)
	endif
	
endif

PReaction:
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
endif
:Shift-Roll-In:
_Overridable()
AttackRegister(Light, 2C+D)
Call(Raise-Lane-Flag)
AttackDuration(25)

Anim(Roll-In)

F1-15:
	Flag(Invul-Mid)
	Flag(Invul-High)
endif

Vcurrent_lane>0:
	SetColboxPhantom(1)
	

	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Sub(current_scale, 25)
	ModelScale(current_scale)

	
	
	
	F15:
		Sub(current_lane, 1)
		SetColboxLayer(current_lane)
		Call(Raise-Lane-Flag)
	endif
	
	F25:
		Transition(AnimStand)
	endif
	
endif
:Shift-Roll-Out:
_Overridable()
AttackRegister(Light, 2A+B)
Call(Raise-Lane-Flag)
AttackDuration(25)

Anim(Roll-Out)

F1-15:
	Flag(Invul-Mid)
	Flag(Invul-High)
endif


Vcurrent_lane<2:
	SetColboxPhantom(1)
	
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
	Add(current_scale, 25)
	ModelScale(current_scale)
	
	
	
	F14:
		Add(current_lane, 1)
		SetColboxLayer(current_lane)
		SpriteOrder(current_lane)
		#Log(current_lane)
		Call(Raise-Lane-Flag)
		Call(Bring-To-Floor)
	endif
	
	F25:
		Transition(AnimStand)
	endif
	
endif

PReaction:
	Unflag(PF_Airborne)
	Flag(PF_Grounded)
endif
:StandardColbox:
CallParent()

SetColboxMode(1)
LO_Shift_M:
	SetColboxLayer(1)

else
	LO_Shift_F:
		SetColboxLayer(2)
	else
		SetColboxLayer(current_lane)
	endif
endif
:State-Template-Attack-Normal-Lane:
# Simple medium attack template for Lane Combat
Call(Raise-Lane-Flag)

AttackRegister(Medium)

# Adjust parameters here
AttackDamage(1000)
AttackDuration(60)
# AttackFlag(Low)

# Put your animation here
#Anim(5B)

# Active frames and hitboxes
F10-12:
	Vcurrent_lane==0:
			HitboxRequires(BackLane)
			Hitbox(1000, 15000, 15000, 25000)
		endif
		Vcurrent_lane==1:
			HitboxRequires(MidLane)
			Hitbox(1000, 15000, 20000, 30000)
		endif
		Vcurrent_lane==2:
			HitboxRequires(FrontLane)
			Hitbox(1500, 16500, 25000, 35000)
		endif
	
endif
:Unique-Move-Meter-Gain:

:Current-Lane---Subentity:
# Autogenerated
:Current-Lane---Variables:
## Put variables here
:Current-Lane---Action:
## Write your behavior here
CallParent()
